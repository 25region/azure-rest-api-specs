{
    "swagger": "2.0",
    "security": [
      {
        "azure_auth": [
          "user_impersonation"
        ]
      }
    ],
    "securityDefinitions": {
      "azure_auth": {
        "type": "oauth2",
        "authorizationUrl": "https://login.microsoftonline.com/common/oauth2/authorize",
        "flow": "implicit",
        "description": "Azure Active Directory OAuth2 Flow",
        "scopes": {
          "user_impersonation": "impersonate your user account"
        }
      }
    },
    "info": {
      "version": "2020-03-15",
      "title": "Common types"
    },
    "definitions": {
      "Plan": {
        "type": "object",
        "required": [
          "name",
          "publisher",
          "product"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "A publisher defined name of the 3rd Party Artifact that is being procured."
          },
          "publisher": {
            "type": "string",
            "description": "The publisher of the 3 rd Party Artifact that is being bought."
          },
          "product": {
            "type": "string",
            "description": "The 3rd Party artifact that is being procured."
          },
          "promotionalCode": {
            "type": "string",
            "description": "A publisher provided promotion code as provisioned in Data Market for the said product/artifact."
          },
          "version": {
            "type": "string",
            "description": "The version of the desired product/artifact. Ignored by commerce."
          },
          "managedBy": {
            "type": "string",
            "description": "Indicates if this resource is managed by another azure resource."
          }
        }
      },
      "Sku": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Required (if sku is specified), string. The name of the SKU. This is typically a letter + number code, such as A0 or P3."
          },
          "tier": {
            "type": "string",
            "description": "The tier of this particular SKU."
          },
          "size": {
            "type": "string"
          },
          "family": {
            "type": "string",
            "description": "If the service has different generations of hardware, for the same SKU, then that can be captured here."
          },
          "capacity": {
            "type": "integer",
            "description": "If the SKU supports scale out/in then the capacity integer should be included. If scale out/in is not possible for the resource this may be omitted."
          }
        }
      },
      "StoragePoolOperationDisplay": {
        "type": "object",
        "required": [
          "provider",
          "resource",
          "operation",
          "description"
        ],
        "properties": {
          "provider": {
            "type": "string",
            "description": "Localized friendly form of the resource provider name."
          },
          "resource": {
            "type": "string",
            "description": "Localized friendly form of the resource type related to this action/operation."
          },
          "operation": {
            "type": "string",
            "description": "Localized friendly name for the operation, as it should be shown to the user."
          },
          "description": {
            "type": "string",
            "description": "Localized friendly description for the operation, as it should be shown to the user."
          }
        }
      },
      "StoragePoolRPOperation": {
        "type": "object",
        "required": [
          "name",
          "isDataAction",
          "display"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "The name of the operation being performed on this particular object"
          },
          "isDataAction": {
            "type": "boolean",
            "description": "Indicates whether the operation applies to data-plane."
          },
          "actionType": {
            "type": "string",
            "description": "Indicates the action type."
          },
          "display": {
            "type": "object",
            "$ref": "#/definitions/StoragePoolOperationDisplay"
          },
          "origin": {
            "type": "string",
            "description": "The intended executor of the operation; governs the display of the operation in the RBAC UX and the audit logs UX."
          }
        }
      },
      "StoragePoolOperationListResult": {
        "type": "object",
        "required": [
          "value"
        ],
        "properties": {
          "value": {
            "type": "array",
            "items": {
              "$ref": "#/definitions/StoragePoolRPOperation"
            }
          },
          "nextLink": {
            "type": "string"
          }
        },
        "description": "List of operations supported by the RP."
      },
      "Error": {
        "type": "object",
        "required": [
          "code",
          "message"
        ],
        "properties": {
          "code": {
            "type": "string",
            "description": "Indicates the status code for the error. Required"
          },
          "message": {
            "type": "string",
            "description": "Indicates what error occured. Required."
          }
        }
      },
      "DiskPoolListResult": {
        "type": "object",
        "required": [
          "value"
        ],
        "properties": {
            "value": {
                "type": "array",
                "items": {
                  "$ref": "#definitions/DiskPoolPayload"
                }
            },
            "nextLink": {
                "type": "string"
            }
        }
      },
      "DiskPoolPayloadProperties": {
        "type": "object",
        "required": [
          "diskPool"
        ],
        "properties": {
            "diskPool": {
                "type": "object",
                "$ref": "#/definitions/DiskPool"
            },
            "provisioningState": {
                "type": "string",
                "description": ""
            }
        }
      },
      "DiskPoolPayload": {
        "type": "object",
        "x-ms-azure-resource": true,
        "allOf": [
          {
            "$ref": "#/definitions/ArmTopLevelResourcePayload"
          },
          {
            "properties": {
              "type": "object",
              "required": [
                "properties"
              ],
              "properties": {
                  "properties": {
                      "type": "object",
                      "$ref": "#definitions/DiskPoolPayloadProperties"
                  }
              }
            }
          }
        ]
      },
      "IscsiTargetList": {
        "type": "object",
        "required": [
          "value"
        ],
        "properties": {
            "value": {
                "type": "array",
                "items": {
                  "$ref": "#definitions/IscsiTargetPayload"
                }
            },
            "nextLink": {
                "type": "string"
            }
        }
      },
      "IscsiTargetPayload": {
        "x-ms-azure-resource": true,
        "type": "object",
        "required": [
          "initiatorIqn",
          "targetIqn",
          "username",
          "password",
          "luns"
        ],
        "properties": {
          "initiatorIqn": {
            "type": "string",
            "minLength": 5,
            "maxLength": 223
          },
          "targetIqn": {
            "type": "string"
          },
          "username": {
            "type": "string",
            "minLength": 7,
            "maxLength": 128
          },
          "password": {
            "type": "string",
            "minLength": 12,
            "maxLength": 512
          },
          "luns": {
            "$ref": "#/definitions/IscsiLunList"
          }
        }
      },
      "IscsiLun": {
        "type": "object",
        "required": [
          "lun",
          "managedDiskAzureResourceId"
        ],
        "properties": {
          "lun": {
            "type": "integer",
            "minimum": 0,
            "maximum": 63,
            "description": ""
          },
          "managedDiskAzureResourceId": {
            "type": "string",
            "description": "Unique Azure resource id of the managed disk. Required."
          }
        }
      },
      "IscsiLunList": {
        "type": "array",
        "items": {
          "$ref": "#/definitions/IscsiLun"
        },
        "description": "Lun list to be exposed through the Iscsi target. Required",
        "minLength": 1,
        "maxLength": 8
      },
      "Disk": {
        "type": "object",
        "description": "Managed disk to attach to the DiskPool. Required.",
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique Azure resource id of the managed disk. Required.",
            "required": true
          }
        }
      },
      "DiskList": {
        "type": "array",
        "items": {
          "$ref": "#/definitions/Disk"
        },
        "description": "List of Azure managed disks to attach to a DiskPool",
        "minLength": 1,
        "maxLength": 15
      },
      "DiskPool": {
        "type": "object",
        "description": "",
        "required": [
          "name",
          "disks"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "Name for the Disk Pool. Required.",
            "minLength": 8,
            "maxLength": 30
          },
          "disks": {
            "$ref": "#/definitions/DiskList"
          }
        }
      },
      "OperationStatusPayload": {
        "type": "object",
        "required": [
          "status"
        ],
        "properties": {
            "id": {
                "type": "string",
                "description": "Unique id of the operation."
            },
            "name": {
                "type": "string",
                "description": "Last segment of the operation id."
            },
            "status": {
                "type": "string",
                "enum": [
                    "Succeeded",
                    "Failed",
                    "Cancelled",
                    "In progress"
                ],
                "x-ms-enum": {
                    "name": "OperationStatus",
                    "modelAsString": false
                }
            },
            "startTime": {
                "type": "string",
                "description": "DateLiteral using ISO8601, per 1API guidelines."
            },
            "endTime": {
                "type": "string",
                "description": "DateLiteral using ISO8601, per 1API guidelines."
            },
            "percentComplete": {
                "type": "integer",
                "description": "Double between 0 and 100."
            },
            "error": {
                "type": "object",
                "$ref": "#/definitions/Error"
            }
        }
      },
      "Tag": {
        "type": "object",
        "required": [
          "key",
          "value"
        ],
        "properties": {
          "key": {
            "type": "string"
          },
          "value": {
            "type": "string"
          }
        }
      },
      "TagList": {
        "type": "array",
        "items": {
          "$ref": "#/definitions/Tag"
        }
      },
      "ArmTopLevelResourcePayload": {
        "type": "object",
        "required": [
          "location"          
        ],
        "properties": {
          "location": {
            "type": "string",
            "description": "Required. Gets or sets the location of the resource. This will be one of the supported and registered Azure Geo Regions (e.g. West US, East US, Southeast Asia, etc.). The geo region of a resource cannot be changed once it is created, but if an identical geo region is specified on update, the request will succeed."
          },
          "tags": {
            "type": "object",
            "$ref": "#/definitions/TagList",
            "description": "Gets or sets a list of key value pairs that describe the resource. These tags can be used for viewing and grouping this resource (across resource groups). A maximum of 15 tags can be provided for a resource. Each tag must have a key with a length no greater than 128 characters and a value with a length no greater than 256 characters."
          },
          "sku": {
            "type": "object",
            "$ref": "#/definitions/Sku",
            "description": "Required. Gets or sets the SKU name."
          },
          "plan": {
            "type": "object",
            "$ref": "#/definitions/Plan",
            "description": "Required. Gets or sets the SKU name."
          },
          "kind": {
            "type": "string",
            "description": "Required. Indicates the type of storage account.",
            "enum": [
            ],
            "x-ms-enum": {
              "name": "Kind",
              "modelAsString": true
            }
          },
          "managedBy": {
            "type": "string",
            "description": "Indicates if this resource is managed by another azure resource."
          }
        }
      }
    }
  }