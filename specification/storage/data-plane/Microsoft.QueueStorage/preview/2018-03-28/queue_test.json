{
  "swagger": "2.0",
  "info": {
    "title": "Azure Queue Storage",
    "version": "2018-03-28",
    "x-ms-code-generation-settings": {
      "header": "MIT",
      "strictSpecAdherence": false
    }
  },
  "x-ms-parameterized-host": {
    "hostTemplate": "{url}",
    "useSchemePrefix": false,
    "positionInOperation": "first",
    "parameters": [
      {
        "$ref": "#/parameters/Url"
      }
    ]
  },
  "securityDefinitions": {
    "queue_shared_key": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header"
    }
  },
  "schemes": [
    "https"
  ],
  "consumes": [
    "application/xml"
  ],
  "produces": [
    "application/xml"
  ],
  "paths": {},
  "x-ms-paths": {
    "/{queueName}": {
      "put": {
        "tags": [
          "service"
        ],
        "operationId": "Queue_Create",
        "description": "creates a new queue under the given account.",
        "parameters": [
          {
            "$ref": "#/parameters/QueueName"
          },
          {
            "$ref": "#/parameters/Timeout"
          },
          {
            "$ref": "#/parameters/Metadata"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "#/parameters/ClientRequestId"
          }
        ],
        "responses": {
          "201": {
            "description": "Success, queue created.",
            "headers": {
              "x-ms-request-id": {
                "x-ms-client-name": "RequestId",
                "type": "string",
                "description": "This header uniquely identifies the request that was made and can be used for troubleshooting the request."
              },
              "x-ms-version": {
                "x-ms-client-name": "Version",
                "type": "string",
                "description": "Indicates the version of the Queue service used to execute the request. This header is returned for requests made against version 2009-09-19 and above."
              },
              "Date": {
                "type": "string",
                "format": "date-time-rfc1123",
                "description": "UTC date/time value generated by the service that indicates the time at which the response was initiated"
              }
            }
          },
          "204": {
            "description": "Success, queue created.",
            "headers": {
              "x-ms-request-id": {
                "x-ms-client-name": "RequestId",
                "type": "string",
                "description": "This header uniquely identifies the request that was made and can be used for troubleshooting the request."
              },
              "x-ms-version": {
                "x-ms-client-name": "Version",
                "type": "string",
                "description": "Indicates the version of the Queue service used to execute the request. This header is returned for requests made against version 2009-09-19 and above."
              },
              "Date": {
                "type": "string",
                "format": "date-time-rfc1123",
                "description": "UTC date/time value generated by the service that indicates the time at which the response was initiated"
              }
            }
          },
          "default": {
            "description": "Failure",
            "headers": {
              "x-ms-error-code": {
                "x-ms-client-name": "ErrorCode",
                "type": "string"
              }
            },
            "schema": {
              "$ref": "#/definitions/StorageError"
            }
          }
        }
      },
      "delete": {
        "tags": [
          "queue"
        ],
        "operationId": "Queue_Delete",
        "description": "operation permanently deletes the specified queue",
        "parameters": [
          {
            "$ref": "#/parameters/QueueName"
          },
          {
            "$ref": "#/parameters/Timeout"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "#/parameters/ClientRequestId"
          }
        ],
        "responses": {
          "204": {
            "description": "No Content",
            "headers": {
              "x-ms-request-id": {
                "x-ms-client-name": "RequestId",
                "type": "string",
                "description": "This header uniquely identifies the request that was made and can be used for troubleshooting the request."
              },
              "x-ms-version": {
                "x-ms-client-name": "Version",
                "type": "string",
                "description": "Indicates the version of the Queue service used to execute the request. This header is returned for requests made against version 2009-09-19 and above."
              },
              "Date": {
                "type": "string",
                "format": "date-time-rfc1123",
                "description": "UTC date/time value generated by the service that indicates the time at which the response was initiated"
              }
            }
          },
          "default": {
            "description": "Failure",
            "headers": {
              "x-ms-error-code": {
                "x-ms-client-name": "ErrorCode",
                "type": "string"
              }
            },
            "schema": {
              "$ref": "#/definitions/StorageError"
            }
          }
        }
      },
      "parameters": []
    },
    "/{queueName}/messages": {
      "get": {
        "tags": [
          "message"
        ],
        "operationId": "Messages_Dequeue",
        "description": "The Dequeue operation retrieves one or more messages from the front of the queue.",
        "parameters": [
          {
            "$ref": "#/parameters/QueueName"
          },
          {
            "$ref": "#/parameters/NumOfMessages"
          },
          {
            "$ref": "#/parameters/VisibilityTimeout"
          },
          {
            "$ref": "#/parameters/Timeout"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "#/parameters/ClientRequestId"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "headers": {
              "x-ms-request-id": {
                "x-ms-client-name": "RequestId",
                "type": "string",
                "description": "This header uniquely identifies the request that was made and can be used for troubleshooting the request."
              },
              "x-ms-version": {
                "x-ms-client-name": "Version",
                "type": "string",
                "description": "Indicates the version of the Queue service used to execute the request. This header is returned for requests made against version 2009-09-19 and above."
              },
              "Date": {
                "type": "string",
                "format": "date-time-rfc1123",
                "description": "UTC date/time value generated by the service that indicates the time at which the response was initiated"
              }
            },
            "schema": {
              "$ref": "#/definitions/DequeuedMessagesList"
            }
          },
          "default": {
            "description": "Failure",
            "headers": {
              "x-ms-error-code": {
                "x-ms-client-name": "ErrorCode",
                "type": "string"
              }
            },
            "schema": {
              "$ref": "#/definitions/StorageError"
            }
          }
        }
      },
      "delete": {
        "tags": [
          "message"
        ],
        "operationId": "Messages_Clear",
        "description": "The Clear operation deletes all messages from the specified queue.",
        "parameters": [
          {
            "$ref": "#/parameters/QueueName"
          },
          {
            "$ref": "#/parameters/Timeout"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "#/parameters/ClientRequestId"
          }
        ],
        "responses": {
          "204": {
            "description": "No Content",
            "headers": {
              "x-ms-request-id": {
                "x-ms-client-name": "RequestId",
                "type": "string",
                "description": "This header uniquely identifies the request that was made and can be used for troubleshooting the request."
              },
              "x-ms-version": {
                "x-ms-client-name": "Version",
                "type": "string",
                "description": "Indicates the version of the Queue service used to execute the request. This header is returned for requests made against version 2009-09-19 and above."
              },
              "Date": {
                "type": "string",
                "format": "date-time-rfc1123",
                "description": "UTC date/time value generated by the service that indicates the time at which the response was initiated"
              }
            }
          },
          "default": {
            "description": "Failure",
            "headers": {
              "x-ms-error-code": {
                "x-ms-client-name": "ErrorCode",
                "type": "string"
              }
            },
            "schema": {
              "$ref": "#/definitions/StorageError"
            }
          }
        }
      },
      "parameters": []
    },
    "/{queueName}/messages?visibilitytimeout={visibilityTimeout}&messagettl={messageTimeToLive}": {
      "post": {
        "tags": [
          "message"
        ],
        "operationId": "Messages_Enqueue",
        "description": "The Enqueue operation adds a new message to the back of the message queue. A visibility timeout can also be specified to make the message invisible until the visibility timeout expires. A message must be in a format that can be included in an XML request with UTF-8 encoding. The encoded message can be up to 64 KB in size for versions 2011-08-18 and newer, or 8 KB in size for previous versions.",
        "parameters": [
          {
            "$ref": "#/parameters/QueueName"
          },
          {
            "$ref": "#/parameters/RequiredQueueMessage"
          },
          {
            "$ref": "#/parameters/VisibilityTimeoutForEnqueue"
          },
          {
            "$ref": "#/parameters/MessageTTL"
          },
          {
            "$ref": "#/parameters/Timeout"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "#/parameters/ClientRequestId"
          }
        ],
        "responses": {
          "201": {
            "description": "Created",
            "headers": {
              "x-ms-request-id": {
                "x-ms-client-name": "RequestId",
                "type": "string",
                "description": "This header uniquely identifies the request that was made and can be used for troubleshooting the request."
              },
              "x-ms-version": {
                "x-ms-client-name": "Version",
                "type": "string",
                "description": "Indicates the version of the Queue service used to execute the request. This header is returned for requests made against version 2009-09-19 and above."
              },
              "Date": {
                "type": "string",
                "format": "date-time-rfc1123",
                "description": "UTC date/time value generated by the service that indicates the time at which the response was initiated"
              }
            },
            "schema": {
              "$ref": "#/definitions/EnqueuedMessageList"
            }
          },
          "default": {
            "description": "Failure",
            "headers": {
              "x-ms-error-code": {
                "x-ms-client-name": "ErrorCode",
                "type": "string"
              }
            },
            "schema": {
              "$ref": "#/definitions/StorageError"
            }
          }
        }
      },
      "parameters": []
    },
    "/{queueName}/messages/{messageid}?popreceipt={popReceipt}": {
      "delete": {
        "tags": [
          "messageId"
        ],
        "operationId": "MessageId_Delete",
        "description": "The Delete operation deletes the specified message.",
        "parameters": [
          {
            "$ref": "#/parameters/QueueName"
          },
          {
            "$ref": "#/parameters/MessageId"
          },
          {
            "$ref": "#/parameters/PopReceipt"
          },
          {
            "$ref": "#/parameters/Timeout"
          },
          {
            "$ref": "#/parameters/ApiVersionParameter"
          },
          {
            "$ref": "#/parameters/ClientRequestId"
          }
        ],
        "responses": {
          "204": {
            "description": "No Content",
            "headers": {
              "x-ms-request-id": {
                "x-ms-client-name": "RequestId",
                "type": "string",
                "description": "This header uniquely identifies the request that was made and can be used for troubleshooting the request."
              },
              "x-ms-version": {
                "x-ms-client-name": "Version",
                "type": "string",
                "description": "Indicates the version of the Queue service used to execute the request. This header is returned for requests made against version 2009-09-19 and above."
              },
              "Date": {
                "type": "string",
                "format": "date-time-rfc1123",
                "description": "UTC date/time value generated by the service that indicates the time at which the response was initiated"
              }
            }
          },
          "default": {
            "description": "Failure",
            "headers": {
              "x-ms-error-code": {
                "x-ms-client-name": "ErrorCode",
                "type": "string"
              }
            },
            "schema": {
              "$ref": "#/definitions/StorageError"
            }
          }
        }
      },
      "parameters": []
    }
  },
  "definitions": {
    "ErrorCode": {
      "description": "Error codes returned by the service",
      "type": "string",
      "enum": [
        "AccountAlreadyExists",
        "AccountBeingCreated",
        "AccountIsDisabled",
        "AuthenticationFailed",
        "AuthorizationFailure",
        "ConditionHeadersNotSupported",
        "ConditionNotMet",
        "EmptyMetadataKey",
        "InsufficientAccountPermissions",
        "InternalError",
        "InvalidAuthenticationInfo",
        "InvalidHeaderValue",
        "InvalidHttpVerb",
        "InvalidInput",
        "InvalidMd5",
        "InvalidMetadata",
        "InvalidQueryParameterValue",
        "InvalidRange",
        "InvalidResourceName",
        "InvalidUri",
        "InvalidXmlDocument",
        "InvalidXmlNodeValue",
        "Md5Mismatch",
        "MetadataTooLarge",
        "MissingContentLengthHeader",
        "MissingRequiredQueryParameter",
        "MissingRequiredHeader",
        "MissingRequiredXmlNode",
        "MultipleConditionHeadersNotSupported",
        "OperationTimedOut",
        "OutOfRangeInput",
        "OutOfRangeQueryParameterValue",
        "RequestBodyTooLarge",
        "ResourceTypeMismatch",
        "RequestUrlFailedToParse",
        "ResourceAlreadyExists",
        "ResourceNotFound",
        "ServerBusy",
        "UnsupportedHeader",
        "UnsupportedXmlNode",
        "UnsupportedQueryParameter",
        "UnsupportedHttpVerb",
        "InvalidMarker",
        "MessageNotFound",
        "MessageTooLarge",
        "PopReceiptMismatch",
        "QueueAlreadyExists",
        "QueueBeingDeleted",
        "QueueDisabled",
        "QueueNotEmpty",
        "QueueNotFound",
        "AuthorizationSourceIPMismatch",
        "AuthorizationProtocolMismatch",
        "AuthorizationPermissionMismatch",
        "AuthorizationServiceMismatch",
        "AuthorizationResourceTypeMismatch",
        "FeatureVersionMismatch"
      ],
      "x-ms-enum": {
        "name": "StorageErrorCode",
        "modelAsString": true
      }
    },
    "StorageError": {
      "type": "object",
      "properties": {
        "Message": {
          "type": "string"
        }
      }
    },
    "QueueMessage": {
      "description": "A Message object which can be stored in a Queue",
      "type": "object",
      "required": [
        "MessageText"
      ],
      "properties": {
        "MessageText": {
          "type": "string",
          "description": "The content of the message"
        }
      }
    },
    "DequeuedMessageItem": {
      "description": "The object returned in the QueueMessageList array when calling Get Messages on a Queue.",
      "type": "object",
      "required": [
        "MessageId",
        "InsertionTime",
        "ExpirationTime",
        "PopReceipt",
        "TimeNextVisible",
        "DequeueCount",
        "MessageText"
      ],
      "properties": {
        "MessageId": {
          "type": "string",
          "description": "The Id of the Message."
        },
        "InsertionTime": {
          "type": "string",
          "format": "date-time-rfc1123",
          "description": "The time the Message was inserted into the Queue."
        },
        "ExpirationTime": {
          "type": "string",
          "format": "date-time-rfc1123",
          "description": "The time that the Message will expire and be automatically deleted."
        },
        "PopReceipt": {
          "type": "string",
          "description": "This value is required to delete the Message. If deletion fails using this popreceipt then the message has been dequeued by another client."
        },
        "TimeNextVisible": {
          "type": "string",
          "format": "date-time-rfc1123",
          "description": "The time that the message will again become visible in the Queue."
        },
        "DequeueCount": {
          "type": "integer",
          "format": "int64",
          "description": "The number of times the message has been dequeued."
        },
        "MessageText": {
          "type": "string",
          "description": "The content of the Message."
        }
      },
      "xml": {
        "wrapped": true,
        "name": "QueueMessage"
      }
    },
    "EnqueuedMessage": {
      "description": "The object returned in the QueueMessageList array when calling Put Message on a Queue",
      "type": "object",
      "required": [
        "MessageId",
        "InsertionTime",
        "ExpirationTime",
        "PopReceipt",
        "TimeNextVisible"
      ],
      "properties": {
        "MessageId": {
          "type": "string",
          "description": "The Id of the Message."
        },
        "InsertionTime": {
          "type": "string",
          "format": "date-time-rfc1123",
          "description": "The time the Message was inserted into the Queue."
        },
        "ExpirationTime": {
          "type": "string",
          "format": "date-time-rfc1123",
          "description": "The time that the Message will expire and be automatically deleted."
        },
        "PopReceipt": {
          "type": "string",
          "description": "This value is required to delete the Message. If deletion fails using this popreceipt then the message has been dequeued by another client."
        },
        "TimeNextVisible": {
          "type": "string",
          "format": "date-time-rfc1123",
          "description": "The time that the message will again become visible in the Queue."
        }
      },
      "xml": {
        "wrapped": true,
        "name": "QueueMessage"
      }
    },
    "DequeuedMessagesList": {
      "description": "The object returned when calling Get Messages on a Queue",
      "type": "array",
      "items": {
        "$ref": "#/definitions/DequeuedMessageItem",
        "xml": {
          "name": "QueueMessage"
        }
      },
      "xml": {
        "wrapped": true,
        "name": "QueueMessagesList"
      }
    },
    "EnqueuedMessageList": {
      "description": "The object returned when calling Put Message on a Queue",
      "type": "array",
      "items": {
        "$ref": "#/definitions/EnqueuedMessage",
        "xml": {
          "name": "QueueMessage"
        }
      },
      "xml": {
        "wrapped": true,
        "name": "QueueMessagesList"
      }
    }
  },
  "parameters": {
    "Url": {
      "name": "url",
      "description": "The URL of the service account, queue or message that is the target of the desired operation.",
      "required": true,
      "type": "string",
      "in": "path",
      "x-ms-skip-url-encoding": true
    },
    "ApiVersionParameter": {
      "name": "x-ms-version",
      "x-ms-client-name": "version",
      "in": "header",
      "required": true,
      "type": "string",
      "description": "Specifies the version of the operation to use for this request.",
      "enum": [
        "2018-03-28"
      ]
    },
    "Body": {
      "name": "body",
      "in": "body",
      "required": true,
      "schema": {
        "type": "object",
        "format": "file"
      },
      "x-ms-parameter-location": "method",
      "description": "Initial data"
    },
    "ClientRequestId": {
      "name": "x-ms-client-request-id",
      "x-ms-client-name": "requestId",
      "in": "header",
      "required": false,
      "type": "string",
      "x-ms-parameter-location": "method",
      "description": "Provides a client-generated, opaque value with a 1 KB character limit that is recorded in the analytics logs when storage analytics logging is enabled."
    },
    "MessageId": {
      "name": "messageid",
      "in": "path",
      "required": true,
      "type": "string",
      "x-ms-parameter-location": "method",
      "description": "The container name."
    },
    "MessageTTL": {
      "name": "messagettl",
      "x-ms-client-name": "MessageTimeToLive",
      "in": "query",
      "required": false,
      "type": "integer",
      "minimum": -1,
      "x-ms-parameter-location": "method",
      "description": "Optional. Specifies the time-to-live interval for the message, in seconds. Prior to version 2017-07-29, the maximum time-to-live allowed is 7 days. For version 2017-07-29 or later, the maximum time-to-live can be any positive number, as well as -1 indicating that the message does not expire. If this parameter is omitted, the default time-to-live is 7 days."
    },
    "Metadata": {
      "name": "x-ms-meta",
      "x-ms-client-name": "metadata",
      "in": "header",
      "required": false,
      "type": "string",
      "x-ms-parameter-location": "method",
      "description": "Optional. Include this parameter to specify that the queue's metadata be returned as part of the response body. Note that metadata requested with this parameter must be stored in accordance with the naming restrictions imposed by the 2009-09-19 version of the Queue service. Beginning with this version, all metadata names must adhere to the naming conventions for C# identifiers.",
      "x-ms-header-collection-prefix": "x-ms-meta-"
    },
    "NumOfMessages": {
      "name": "numofmessages",
      "x-ms-client-name": "numberOfMessages",
      "in": "query",
      "required": false,
      "type": "integer",
      "minimum": 1,
      "x-ms-parameter-location": "method",
      "description": "Optional. A nonzero integer value that specifies the number of messages to retrieve from the queue, up to a maximum of 32. If fewer are visible, the visible messages are returned. By default, a single message is retrieved from the queue with this operation."
    },
    "RequiredQueueMessage": {
      "name": "QueueMessage",
      "in": "body",
      "required": true,
      "schema": {
        "$ref": "#/definitions/QueueMessage"
      },
      "x-ms-parameter-location": "method",
      "description": "A Message object which can be stored in a Queue"
    },
    "QueueName": {
      "name": "queueName",
      "in": "path",
      "required": true,
      "type": "string",
      "x-ms-parameter-location": "method",
      "description": "The queue name."
    },
    "PopReceipt": {
      "name": "popreceipt",
      "x-ms-client-name": "popReceipt",
      "in": "query",
      "required": true,
      "x-ms-parameter-location": "method",
      "description": "Required. Specifies the valid pop receipt value returned from an earlier call to the Get Messages or Update Message operation.",
      "type": "string"
    },
    "Timeout": {
      "name": "timeout",
      "in": "query",
      "required": false,
      "type": "integer",
      "minimum": 0,
      "x-ms-parameter-location": "method",
      "description": "The The timeout parameter is expressed in seconds. For more information, see <a href=\"https://docs.microsoft.com/en-us/rest/api/storageservices/setting-timeouts-for-queue-service-operations>Setting Timeouts for Queue Service Operations.</a>"
    },
    "VisibilityTimeout": {
      "name": "visibilitytimeout",
      "in": "query",
      "required": false,
      "type": "integer",
      "minimum": 0,
      "maximum": 604800,
      "x-ms-parameter-location": "method",
      "description": "Optional. Specifies the new visibility timeout value, in seconds, relative to server time. The default value is 30 seconds. A specified value must be larger than or equal to 1 second, and cannot be larger than 7 days, or larger than 2 hours on REST protocol versions prior to version 2011-08-18. The visibility timeout of a message can be set to a value later than the expiry time."
    },
    "VisibilityTimeoutForEnqueue": {
      "name": "visibilitytimeout",
      "in": "query",
      "required": false,
      "type": "integer",
      "minimum": 0,
      "maximum": 604800,
      "x-ms-parameter-location": "method",
      "description": "Optional. If specified, the request must be made using an x-ms-version of 2011-08-18 or later. If not specified, the default value is 0. Specifies the new visibility timeout value, in seconds, relative to server time. The new value must be larger than or equal to 0, and cannot be larger than 7 days. The visibility timeout of a message cannot be set to a value later than the expiry time. visibilitytimeout should be set to a value smaller than the time-to-live value."
    }
  }
}
